{ 
    "TableName": "rakan-devicestate",
    "description": "Stores current state & desired state of iot devices(nano esp32)",,
    "KeySchema": [
        {
            "AttributeName": "deviceId",
            "KeyType": "HASH"
        }
    ],

    "AttributeDefinitions": [
        {
            "AttributeName": "deviceId",
            "AttributeType": "S"
        }
    ],

    "BillingMode": "PAY_PER_REQUEST",
    "TimeToLiveSpecification": {
        "Enabled": true,
        "AttributeName": "ttl"
    },

    "ItemExample":{
        "deviceId": "thermo-001",
        "currentState": {
            "temperatureF": "<float from device>",
            "humidity": "<float from device>",
            "occupancy": "<boolean from device>",
            "timestamp": "<auto-generated ETC timestamp>"
        },

        "desiredState": {
            "temperatureF": "<User defined>",
            "mode": "<cool/heat/auto/off>",
            "fan": "<on/off/auto>"
        },

        "status": "online",
        "lastUpdated": 1699999999,
        "ttl": 1700000000,
        "//comment" : "ttl sets data expiration date(in seconds)"
    },

    "AccessPatterns":[
        "GetItem(deviceID='esp32')->decison lambda",
        "PutItem(Item=device_state) -> ingestLambda",
        "UpdateItem(deviceID='esp32', desiredState=new_state) -> controlLambda"
    ]

    

}